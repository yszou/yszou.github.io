Racket è¯­è¨€å­¦ä¹ å‚è€ƒ
é‚¹ä¸šç››
%%mtime(%Y-%m-%d %H:%M)
%!encoding: utf-8
%!options(xhtml): --google-analytics --disqus
%!qr: http://www.zouyesheng.com/racket.html
%!format: !email
%%toc


# å®‰è£…ä¸ç®€ä»‹ #

*racket* æ˜¯ä¸€ä¸ªæ¯”è¾ƒç°ä»£åŒ–çš„ *scheme* è¯­è¨€ã€‚å®ƒçš„ Hello World æ˜¯è¿™æ ·çš„ï¼š

```racket
#lang racket  

(display "helloworld")
```

å¯ä»¥ç›´æ¥ä½¿ç”¨ï¼š

```bash
sudo apt-get install racket
```

è¿›è¡Œå®‰è£…ï¼Œå®Œæˆä¹‹åï¼Œæœ‰ä¸€ä¸ª ``racket`` çš„å¯æ‰§è¡Œç¨‹åº/REPL ï¼ŒåŠ ``drracket`` è¿™ä¸ªå¼€å‘ç¯å¢ƒ/IDEã€‚

``racket`` å¯ä»¥ç›´æ¥æ‰§è¡Œä¸€ä¸ªæ–‡ä»¶ï¼Œå¦‚ï¼š

```bash
racket /home/zys/temp/demo.rkt
```

*racket* æä¾›äº†ç¼–è¯‘å™¨ï¼Œå¯ä»¥ç›´æ¥ç¼–è¯‘å¾—åˆ°å¯æ‰§è¡Œç¨‹åºã€‚


# åŸºæœ¬è¯­æ³• #

## åœ†æ‹¬å·å’Œæ–¹æ‹¬å· ##

*scheme* æ˜¯ç”¨ S è¡¨è¾¾å¼æ¥ç»„æˆçš„ï¼Œ *racket* ä¸­è¿™ç‚¹å¹¶æ²¡æœ‰å˜åŒ–ï¼Œä½†æ˜¯ *racket* ä¸­çš„ S è¡¨è¾¾å¼ï¼ŒåŒæ—¶æ”¯æŒåœ†æ‹¬å· ``()`` å’Œæ–¹æ‹¬å· ``[]`` ï¼Œè¿™ä¸ªæœºåˆ¶ï¼Œåœ¨æ‹¬å·åµŒå¥—åœºæ™¯ä¸‹ï¼Œå¯ä»¥æä¾›æ›´å¥½çš„è§†è§‰è¯†åˆ«ï¼Œå¦‚ï¼š

```racket
#lang racket  

(define [add1 a b] [+ a b])
(define (add2 a b) (+ a b))

(add1 1 2)
(add2 1 2)
```

## æ³¨é‡Š ##

```racket
#lang racket  

;è¿™æ˜¯ä¼ ç»Ÿçš„å•è¡Œæ³¨é‡Š

#| 
è¿™æ˜¯ racket çš„ï¼Œå¯ä»¥å¤šè¡Œçš„ï¼Œ
    #|
        å¯ä»¥åµŒå¥—çš„æ³¨é‡Š
    |#
|#

#; æ³¨é‡Šä¸€ä¸ª "å•è¯­æ³•å•å…ƒ"
#;(display
    123) (display "1\n")
#;1 2 (display "2\n")
```

``#;`` çš„è¡Œä¸ºæ¯”è¾ƒç‰¹æ®Šï¼Œå…¶å®ƒè¯­è¨€ä¸­æ˜¯æ²¡æœ‰çš„ã€‚


## åŸºæœ¬æ•°æ®ç±»å‹ ##

```racket
#lang racket  

1
3.14
1/3
(+ 1/3 1/3)
6.02e+23
1+2i
#t
#f
"string"
"string\"ss\""
(display "string\"ss\"\n")
"Î»x:(Î¼Î±.Î±â†’Î±).xx"
"ã€â–¶ğŸ˜€ğŸ˜‚"
(display "ã€â–¶ğŸ˜€ğŸ˜‚\n")
```

åŸºæœ¬æ•°æ®ç±»å‹æœ‰ï¼šæ•´æ•°ï¼Œå°æ•°ï¼Œå®æ•°ï¼Œå¤æ•°ï¼Œå¸ƒå°”é‡ï¼ŒUnicode å­—ç¬¦ä¸²ã€‚

åé¢è¿˜ä¼šä¸“é—¨å¯¹å†…ç½®çš„æ•°æ®ç±»å‹ä½œä»‹ç»ã€‚


## é€»è¾‘è¿ç®—ï¼Œæ¡ä»¶åˆ¤æ–­ ##

TODO


## å®šä¹‰ä¸å‡½æ•°ï¼ŒåŒ¿åå‡½æ•° ##

*å®šä¹‰* ï¼Œè¿™é‡ŒæŒ‡çš„æ˜¯ ``define`` ï¼Œå…¶å®åº”è¯¥è¯´ *ç»‘å®š* çš„ï¼š

```racket
#lang racket  

(define a 1)
(define b 2)
(+ a b)
```

åƒæ˜¯èµ‹å€¼ï¼Œä½†æ˜¯ä¸èƒ½å¯¹åŒä¸€ä¸ª *æ ‡è¯†* ï¼Œè¿›è¡Œé‡å¤çš„ ``define`` ã€‚

``define`` ä¹Ÿå¯ä»¥ç”¨äºå‡½æ•°çš„å®šä¹‰ï¼š

```
#lang racket  

(define [add a b] [+ a b])
(add 1 2)
```

ä½¿ç”¨ ``labmda`` çš„åŒ¿åå‡½æ•°ä¹Ÿè¡Œï¼š

```racket
#lang racket  

(define add [lambda (a b) (+ a b)])
(add 1 2)
```

## åˆ—è¡¨ï¼Œè¿­ä»£ ##

*åˆ—è¡¨* ï¼Œæ˜¯ *scheme* è¿™ç±»è¯­è¨€ï¼Œæœ€æ ¸å¿ƒçš„ä¸€ç§æ•°æ®ç»“æ„ã€‚å› ä¸ºï¼Œæˆ‘ä»¬å†™çš„ä»£ç ï¼Œæœ¬èº«å°±æ˜¯ä¸€ä¸ªä¸€ä¸ªçš„ *åˆ—è¡¨* ã€‚è¿™ä¸ªæ€§è´¨æ˜¯ä¸€èˆ¬å¤§ä¼—åŒ–çš„è¯­è¨€æ²¡æœ‰çš„ã€‚


```racket
#lang racket  

(define add [lambda (a b) (+ a b)])
(add 1 2)

'(add 1 2)
'("add" "1" "2")
(list add 1 2)
(list "add" 1 2)
```

``list`` å‡½æ•°ï¼Œå’Œ ``'`` å‰ç¼€ï¼Œæ˜¯åŒæ ·çš„ä½œç”¨ï¼Œå°±æ˜¯å¾—åˆ°ä¸€ä¸ªåˆ—è¡¨ã€‚

*racket* å†…ç½®äº†å¾ˆå¤šé’ˆå¯¹åˆ—è¡¨çš„å‡½æ•°ï¼š

```racket
#lang racket  

(define any '(1 2 3 add "add"))
any
(length any)
(list-ref any 0)
(list-ref any 3)
(append any "1")
(append any '(2 "good"))
(reverse any)
```

``append`` çš„ç¬¬äºŒä¸ªå‚æ•°ï¼Œç±»å‹ä¸åŒï¼Œç»“æœæ˜¯ä¸åŒçš„ã€‚å¦‚æœç¬¬äºŒä¸ªå‚æ•°ä¸æ˜¯ *list* ï¼Œåˆ™ä¼šå¾—åˆ°ä¸€ä¸ª *Pair* ã€‚


*è¿­ä»£* çš„æ¦‚å¿µï¼Œç±»ä¼¼äºå…¶å®ƒè¯­è¨€ä¸­çš„é‚£ä¸€å †â€œå‡½æ•°å¼â€æ–¹æ³•ï¼Œåƒ ``map`` ``filter`` ``reduce`` ä¹‹ç±»çš„ã€‚

*racket* ä¸­æœ‰ ``map`` ``filter`` ``foldl`` ``andmap`` ``ormap`` ã€‚

```racket
#lang racket  

(map [lambda (n) (* n 2)] '[1 2 3 4 5])
(filter [lambda (n) (> n 4)] '[1 3 4 5 6 7 8])
(foldl [lambda (a b) (+ a b)] 0 '[1 2 3 4])
(andmap [lambda (n) (> n 4)] '[5 6])
(ormap [lambda (n) (> n 5)] '[5 6])
```

## åˆ—è¡¨ä¼ ç»Ÿ ##

``map`` ä¹‹ç±»çš„å‡½æ•°ï¼Œå¯¹äºâ€œè¿­ä»£â€æ¥è¯´ä¸æ˜¯å¿…é¡»çš„ï¼Œä¼ ç»Ÿä¸Šï¼Œåªéœ€è¦ ``car`` å’Œ ``cdr`` ä¸¤ä¸ªæ–¹æ³•å°±å¯ä»¥å®Œæˆå¯¹åˆ—è¡¨çš„éå†æ“ä½œï¼ŒåŸºäºå®ƒä»¬ï¼Œå¯ä»¥è‡ªå·±å®šä¹‰ ``map`` ``filter`` ç­‰ã€‚åœ¨ *racket* ä¸­ï¼Œå¯¹åº”çš„æ–¹æ³•æ˜¯ ``first`` å’Œ ``rest`` ï¼š

```racket
#lang racket  

(first '(1 2 3))
(rest '(1 2 3))
(first (rest '(1 2 3)))
(define l (cons 2 (cons 1 empty)))
(first l)
(rest l)
(empty? empty)
(empty? '())
(empty? '(1))
(empty? 1)
```

è¦å†™ä¸ªç®€å•çš„ ``map`` å°±å¾ˆå®¹æ˜“äº†ï¼š

```racket
#lang racket  

(define (my-map f lst)
  (if [empty? lst]
    lst
    [cons (f [first lst]) (my-map f [rest lst])] ))

(my-map (lambda (n) (+ n 1)) '(1 2 3))
```

``car`` , ``cdr`` ï¼Œç”šè‡³æ˜¯ ``pair`` è¿™ç±»ä¼ ç»Ÿæ¦‚å¿µåœ¨ *racket* ä¸­éƒ½æ˜¯å­˜åœ¨çš„ï¼Œä¸è¿‡å¹¶ä¸éœ€è¦åˆ»æ„å»ä½¿ç”¨å°±æ˜¯äº†ï¼š

```racket
#lang racket  

(pair? (cons 1 2))
(list? (cons 1 2))
(cons 1 2)
(car (cons 1 2))
(cdr (cons 1 2))
(car '(1 2 3))
(cdr '(1 2 3))
```


## å°¾é€’å½’ ##

å‰é¢å†™çš„ ``my-map`` ï¼Œæ˜¯ä¸€ä¸ªæ¯”è¾ƒç›´æ¥çš„å®ç°ï¼Œå®ƒé€šè¿‡é€’å½’çš„æ–¹å¼ï¼Œä¾æ¬¡æŠŠ ``my-map`` çš„ç»“æœä½œä¸º ``cons`` çš„ç¬¬äºŒä¸ªå‚æ•°ã€‚è¿™ç§ç»“æ„ä¸‹ï¼Œåœ¨åå¤è‡ªè°ƒç”¨ ``my-map`` çš„æ—¶å€™ï¼Œéƒ½å¿…é¡»ä¿å­˜ä¸€ä¸ªçŠ¶æ€ï¼Œè¿™ä¸æ˜¯ä¸€ç§é«˜æ•ˆçš„è¡¨ç°ã€‚

æ”¹è¿›çš„åŠæ³•ï¼Œæ˜¯è®©åå¤è‡ªè°ƒç”¨ ``my-map`` æ—¶ï¼Œéƒ½ä¸ä¾èµ–å¤–éƒ¨çš„ä»»ä½•ä¿¡æ¯ï¼Œæ‰€æœ‰ä¿¡æ¯éƒ½é€šè¿‡â€œå‚æ•°â€ä½“ç°ã€‚


```racket
#lang racket  

(define (my-map f lst)
  (define (iter f lst result)
    [if (empty? lst) (reverse result)
                         ;---------------------------;
      (iter f (rest lst) [cons (f (first lst)) result] )]
    )
  (iter f lst empty))

(my-map (lambda (n) (+ n 2)) '(1 2 3))
(my-map (lambda (n) (+ n 2)) empty)
```

ä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬åœ¨æ¯æ¬¡è‡ªè°ƒç”¨ ``my-app`` æ—¶ï¼Œéƒ½åœ¨å°å¿ƒåœ°æ„é€ å®Œæ•´çš„ ``result`` å‚æ•°ï¼Œè¿™æ ·ï¼Œå½“æœ€ç»ˆæ»¡è¶³ç»“æŸè¿­ä»£çš„æ¡ä»¶æ—¶ï¼Œç›´æ¥è¿”å› ``result`` å³å¯ï¼Œä¸éœ€è¦é¢å¤–çš„â€œå›æº¯â€è¿‡ç¨‹ã€‚


ä¸Šé¢çš„ä»£ç ï¼Œå¯ä»¥ä½¿ç”¨å†…ç½®çš„ ``for/list`` ï¼ˆæˆ‘çŒœå®ƒåº”è¯¥æ˜¯ä¸€ä¸ªå®ï¼‰æ¥å®Œæˆï¼š

```racket
#lang racket  

(define (my-map f lst)
             ;v;        ;v;
  (for/list ([i lst]) (f i)))

(my-map (lambda (i) (+ i 2)) '(1 2 3 4))
```

ç°åœ¨æˆ‘ä»¬å¹¶æ²¡æœ‰è®²è¿‡â€œå˜é‡â€ä¹‹ç±»çš„æ¦‚å¿µï¼Œåªæœ‰å‡½æ•°çš„â€œå‚æ•°â€ã€‚ä¸Šé¢ä»£ç ä¸­çš„ ``i`` ï¼Œè™½ç„¶çœ‹èµ·æ¥åƒâ€œå˜é‡â€ï¼Œä½†åœ¨å®å±•å¼€åï¼Œä¹Ÿå°±åªæ˜¯ä¸€ä¸ªå‡½æ•°å‚æ•°äº†ã€‚ä»å½¢å¼ä¸Šï¼Œæˆ‘ä»¬å¯ä»¥çŒœå‡ºï¼Œå¯¹äº ``for/list`` æ¥è¯´ï¼Œå®ƒçš„ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œæ˜¯å¯ä»¥æœ‰å¤šä¸ªè¿­ä»£çš„å–å€¼å¯¹ï¼Œè¿™äº›å–å€¼å¯¹ï¼Œç¬¬ä¸€ä¸ªå‚æ•°ï¼Œæ˜¯ä¸€ä¸ªå½¢å¼ä¸Šçš„åå­—ï¼Œè€Œç¬¬äºŒä¸ªå‚æ•°ï¼Œæ˜¯ä¸€ä¸ªè¡¨è¾¾å¼ï¼Œä¼šè¢«â€œæ±‚å€¼â€ã€‚

å†™ä¸€äº›ä¾‹å­è¯•è¯•ï¼š

```racket
#lang racket  

(for/list ([a '(1 2 3)]) ((lambda (i) (+ i 2)) a))

(for/list ([a '(1 2 3)]
           [b (reverse '(1 2 3))])
  ([lambda (i k) (+ i k)] a b))
```

åœ¨ *racket* ä¸­ï¼Œå®ƒå¹¶ä¸é¿è®³ä½¿ç”¨é€’å½’ï¼Œä¸æ˜¯è¯´ä¸€å®šè¦å°½é‡ä½¿ç”¨â€œè¿­ä»£â€ï¼ˆè¿­ä»£åªæ˜¯é€’å½’çš„ä¸€ç§ç‰¹æ®Šå½¢å¼è€Œå·²ï¼‰ã€‚åŒæ—¶ï¼Œå› ä¸ºè¯­è¨€æœºåˆ¶ï¼Œåœ¨ *racket* ä¸­å¹¶ä¸ä¼šæœ‰ *stack overflow* é—®é¢˜ï¼ˆä½†æ˜¯ä»ç„¶ä¼šä½¿ç”¨é¢å¤–çš„æ›´å¤šå†…å­˜ï¼‰ã€‚


## ä¸­ç¼€è¯­æ³• ##

è¿™ä¸ªï¼Œæ„Ÿè§‰åƒæ˜¯ *racket* è‡ªå·±ç©èŠ±æ´»ï¼Œé€šè¿‡â€œç‚¹â€ç¬¦å·ï¼Œ *racket* å®šä¹‰äº†ä¸€ç§ä¸­ç¼€è¡¨è¾¾å¼çš„æ ¼å¼ï¼š

```racket
#lang racket  

( (1 . + . 1) . + . 2 )
'(1 . + . 2)

(define (times base n) (base . * . n))
(10 . times . 2)
```

è¿™ç§è¡¨è¾¾å¼ï¼Œå¯ä»¥ç‰¹å®šä½¿ç”¨åœ¨ï¼Œæ¥æ”¶ 2 ä¸ªå‚æ•°çš„å‡½æ•°ä¸Šã€‚


# æ•°æ®ç±»å‹ #

## å¸ƒå°”å€¼ ##

``#t`` ``#f`` ``#T`` ``#F`` ï¼Œæ˜¯å¸ƒå°”å€¼ã€‚åœ¨é€»è¾‘åˆ¤æ–­ä¸­ï¼Œæ‰€æœ‰ä¸æ˜¯ ``#f`` ``#F`` çš„ï¼Œéƒ½ä¼šè¢«è®¤ä¸ºæ˜¯ ``#t`` ã€‚

ä½¿ç”¨ ``boolean?`` å¯ä»¥åšç²¾ç¡®çš„ç±»å‹åˆ¤æ–­ï¼š

```
#lang racket  

(boolean? #t)
(boolean? #T)
(boolean? 1)
(boolean? (not 1))
```


## æ•°å­— ##

æ•°å­—çš„æƒ…å†µåœ¨ *racket* ä¸­å¤æ‚ä¸€äº›ã€‚

ä¼ ç»Ÿä¸Šï¼Œæˆ‘ä»¬ç†è§£æ•°å­—ç±»å‹ï¼Œå¯ä»¥åˆ†æˆ æ•´æ•°ï¼Œæµ®ç‚¹æ•°ï¼Œä¹‹ç±»çš„ã€‚ *racket* ä¸­ä¹Ÿæœ‰è¿™äº›æ¦‚å¿µï¼Œä½†åœ¨å®ƒä»¬ä¹‹ä¸Šï¼Œ *racket* ä¸­çš„æ•°å­—è¿˜è¢«åˆ†æˆâ€œç²¾ç¡®æ•°å­—â€ *exact* å’Œâ€œéç²¾ç¡®æ•°å­—â€ *inexact* ã€‚

åˆ†æ•°çš„ ``1/2`` å’Œæµ®ç‚¹æ•°çš„ ``0.5`` ï¼Œæ˜¯ä¸åŒçš„ã€‚ ``1/2`` æ˜¯ *exact* ï¼Œè€Œ ``0.5`` æ˜¯ *inexact* ã€‚

ç²¾ç¡®çš„æ•°å­—ç±»å‹æœ‰è¿™äº›ï¼š

- æ•´æ•°ï¼Œ ``1``, ``999999``, ``-12``
- åˆ†æ•°ï¼Œ ``1/2``, ``-3/5``
- å¤æ•°ï¼Œ ``1+2i`` , ``1/3-2/5j``


ä¸ç²¾ç¡®çš„æ•°å­—ç±»å‹æœ‰ï¼š

- æµ®ç‚¹ï¼Œ ``2.0``,  ``3.14e+10``
- æ— é™ï¼Œ ``+inf.0`` , ``-inf.0`` ï¼ˆå¿…é¡»æ˜¯è¿™ä¸¤ä¸ªï¼‰
- éæ•°å­—ï¼Œ ``+nan.0``, ``-nan.0``
- å¤æ•°ï¼Œ ``2.1+3.0i``, ``-inf.0+nan.0i``


åœ¨ä¹¦å†™æ—¶ï¼Œå¯ä»¥æ˜ç¡®è¡¨ç¤ºæ˜¯å¦ *exact* ï¼Œä½¿ç”¨ ``#e`` æˆ–è€… ``#i`` ï¼Œ *racket* å¯ä»¥è‡ªåŠ¨è½¬æ¢ï¼š

```racket
#e0.5 ;1/2
#i1/2 ;0.5
#e0.1 ;1/10
```

äºŒè¿›åˆ¶ï¼Œå…«è¿›åˆ¶ï¼Œåå…­è¿›åˆ¶ï¼Œåˆ†åˆ«ä½¿ç”¨ ``#b``, ``#o``, ``#x`` ï¼š

```
#xFF ;255
#b100100 ;36
#o10 ;8
```

ç²¾ç¡®å€¼å’Œéç²¾ç¡®å€¼ä¹‹é—´ä½¿ç”¨ ``exact->inexact`` å’Œ ``inexact->exact`` è½¬æ¢ï¼š

```racket
(exact->inexact 1/3)
(inexact->exact 0.3333) ;éå¸¸å¤§çš„ä¸¤ä¸ªæ•´æ•°ç›¸é™¤
```

ä¸åŒç±»å‹çš„æ€§èƒ½è¡¨ç°æ–¹é¢ï¼š å°çš„æ•´æ•° > æµ®ç‚¹ > è¶…å¤§æ•´æ•°å’Œå…¶å®ƒç²¾ç¡®æ•°


æ•°å­—çš„æ¯”è¾ƒï¼Œä¸€èˆ¬æœ‰ä¸¤ä¸ªæ–¹æ³•ï¼Œ ``=`` å’Œ ``eqv?`` ï¼Œå‰è€…ä¼šå°è¯•è½¬æ¢åˆ°ç²¾ç¡®å€¼åå†æ¯”è¾ƒï¼Œåè€…ä¸ä¼šï¼š

```racket
(= 1 1.0) ;t
(= 1/3 0.333333) ;f
(eqv? 1 1.0) ;f
(eqv? 1 3/3) ;t
```

## å­—ç¬¦å’Œå­—ç¬¦ä¸² ##

*racket* ä¸­çš„ *å­—ç¬¦* æŒ‡ä¸€ä¸ª Unicode å€¼ã€‚å¯ä»¥ä½¿ç”¨ ``#\`` ï¼Œ ``#\u`` , ``#\space`` ``#\newline`` è¿™äº›è¡¨ç¤ºæ³•ã€‚åŒæ—¶ï¼Œä½¿ç”¨ ``char->integer`` å’Œ ``integer->char`` å®Œæˆæ•°å­—å’Œå­—ç¬¦çš„è½¬æ¢ï¼š

ä½¿ç”¨ ``char=?`` å¯ä»¥æ¯”è¾ƒä¸¤ä¸ªå­—ç¬¦ï¼Œæˆ–è€… ``char-ci=?`` å¿½ç•¥å¤§å°å†™ï¼š

```racket
(char=? #\a #\a)
(char-ci=? #\a #\A)
(char=? #\a #\u61)
(char=? #\ã€ #\ã€)
```

*å­—ç¬¦ä¸²* æ˜¯å›ºå®šé•¿åº¦çš„å­—ç¬¦æ•°ç»„ï¼Œä½¿ç”¨åŒå¼•å·åŒ…èµ·æ¥ã€‚

```racket
(display "\u03BB\u03BB\n\u03BB")
```

å­—ç¬¦ä¸²åˆ†ä¸ºâ€œå¯å˜â€å’Œâ€œä¸å¯å˜â€ä¸¤ç§æƒ…å†µã€‚ç›´æ¥å†™æ­»çš„æ˜¯ä¸å¯å˜çš„å­—ç¬¦ä¸²ï¼Œé€šè¿‡ä¸€äº›æ–¹æ³•ï¼Œå¯ä»¥å¾—åˆ°å¯å˜çš„å­—ç¬¦ä¸²ï¼š

```racket
#lang racket  

(define s (make-string 10 #\.))
(display s)
(display "\n")
(string-set! s 2 #\x)
(display s)
```


## å­—èŠ‚å’Œå­—èŠ‚ä¸² ##

*racket* çš„ *å­—èŠ‚*ï¼Œå°±æ˜¯ *0-255* çš„æ•´æ•°ï¼š

```racket
(byte? 0) ;#t
(byte? 256) ;#f
```

*å­—èŠ‚ä¸²* æ˜¯ä½¿ç”¨ *#* å‰ç¼€çš„å­—ç¬¦ä¸²æ ·å­ï¼š

```racket
#"Hello"
"Hello"

(define b (make-bytes 10 0))
(bytes-set! b 0 97)
b
```

å¦‚æœä½¿ç”¨ ``display`` å‡½æ•°å»è¾“å‡ºå­—èŠ‚ä¸²çš„è¯ï¼Œå®ƒä¼šæŒ‰ UTF-8 çš„ç¼–ç æ–¹å¼å¤„ç†ã€‚

å­—èŠ‚ä¸²å’Œå­—ç¬¦ä¸²çš„ç›¸äº’è½¬æ¢ï¼Œéœ€è¦ä½¿ç”¨ä¸“é—¨çš„å‡½æ•°å®ç°ï¼š

```racket
(bytes->string/utf-8 #"\xCE\xBB") ;Î»
```

## ç¬¦å· ##

ç¬¦å· *Symbol* æ˜¯å…ƒç¼–ç¨‹ä¸­éå¸¸åŸºç¡€çš„æ¦‚å¿µï¼Œæ¯”å¦‚ä¸‹é¢çš„ä»£ç ï¼š

```racket
(first '(define a 1))
(first '("define" a 1))
```

å®ƒä»¬è¿”å›çš„æ˜¯ä»€ä¹ˆä¸œè¥¿ï¼Ÿ

ç¬¬ä¸€è¡Œä»£ç ï¼Œè¿”å›çš„å°±æ˜¯ ``define`` ç¬¦å·ï¼š

```racket
(eq? [first '(define a 1)] 'define)
```

ä¹Ÿå¯ä»¥ä½¿ç”¨ ``gensym`` å‡½æ•°ï¼Œæ¥è‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªç³»ç»Ÿå”¯ä¸€çš„ç¬¦å·ï¼Œè¿™åœ¨ä¸€äº›å®å±•å¼€çš„å®ç°ä¸­ï¼Œæ˜¯å¿…é¡»çš„ï¼š

```racket
(define s (gensym))
```

``string->uninterned-symbo`` å‡½æ•°ï¼Œå¯ä»¥æŠŠä¸€ä¸ªå­—ç¬¦ä¸²è½¬æˆå”¯ä¸€ç¬¦å·ï¼š

```racket
(eq? [string->uninterned-symbol "a"] [string->uninterned-symbol "a"]) ;#f
```

## å…³é”®è¯ ##

*å…³é”®è¯*ï¼Œ *Keyword* ï¼Œæ˜¯ *racket* ä¸­æ–°çš„æ¦‚å¿µï¼Œæ„Ÿè§‰è·Ÿå…¶å®ƒç¼–ç¨‹è¯­è¨€ä¸­çš„â€œå…³é”®è¯å‚æ•°â€æ˜¯ä¸€æ ·çš„ï¼Œå…·ä½“çš„ä½œç”¨ï¼Œä¹Ÿæ˜¯é™¤äº†å‡½æ•°å‚æ•°ä¸­çš„â€œå…³é”®è¯å‚æ•°â€ï¼Œæˆ‘è¿˜ä¸çŸ¥é“èƒ½åšä»€ä¹ˆã€‚

å½¢å¼ä¸Šï¼Œä¸ *Symbol* ç±»ä¼¼ï¼Œæ¯”å¦‚ ``#:hello`` ï¼Œä½†æ˜¯å®ƒä»¬æ˜¯ä¸¤ç§ä¸åŒçš„ç±»å‹ï¼š

```racket
(symbol? '#:app)
(keyword? '#:app)
```

ä½¿ç”¨ä¸Šï¼Œæ”¾åœ¨å‚æ•°å‰é¢å°±å¯ä»¥äº†ï¼š

```racket
#lang racket  

(define (lst a b #:a ka #:b kb) (list a b ka kb))
(lst 1 2 #:a 3 #:b 4)
(lst #:b 3 1 2 #:a 1)
```

æœ‰äº† *keyword* æœºåˆ¶ï¼Œå¯ä»¥åœ¨ä¼ å‚æ—¶ï¼Œé¡ºåºä¸Šæ²¡æœ‰é™åˆ¶ã€‚é *keyword* å‚æ•°ï¼Œå†æŒ‰é¡ºåºåŒ¹é…ã€‚


## åˆ—è¡¨å’Œç»“å¯¹ ##

è¿™ä¸ªå‰é¢å·²ç»ä½¿ç”¨è¿‡å¾ˆå¤šäº†ã€‚


```racket
#lang racket  

(cons 1 2)
(cons 1 '(2))
(cons 1 null)
(cons 1 empty)

(display "-----\n")

(empty? null)
(null? empty)

(display "-----\n")

(list? '(1 . 2))
(list? '(1 2))

(display "-----\n")

(pair? '(1 2))
(pair? '(1 . 2))
```

å¯ä»¥çœ‹å‡ºï¼Œ *list* æ˜¯ *pair* çš„ç‰¹æ®Šæƒ…å†µã€‚


## å‘é‡ ##

*å‘é‡*ï¼Œ *Vector* ï¼Œæ˜¯ *racket* é¢„ç½®çš„ä¸€ç§æ•°æ®ç»“æ„ã€‚å¦‚æœè¯´ *list* æ˜¯é“¾è¡¨ï¼Œé‚£ *vector* å°±åƒä¼ ç»Ÿå®šé•¿æ•°ç»„äº†ï¼Œå®ƒå¯ä»¥åœ¨ ``O(1)`` æ—¶é—´è®¿é—®æŒ‡å®šæˆå‘˜ã€‚

åŒæ—¶ï¼Œè·Ÿ *strings* ä¸€æ ·ï¼Œ *vector* ä¹Ÿåˆ†å¯å˜çš„ï¼Œæˆ–è€…ä¸å¯å˜çš„ã€‚

å½¢å¼ä¸Šï¼Œå¯ä»¥çœ‹æˆåŠ äº† ``#`` å‰ç¼€çš„åˆ—è¡¨ï¼Œæˆ–è€…æ˜¯åŠ äº† ``#19`` è¿™ç§å‰ç¼€çš„åˆ—è¡¨ï¼Œ ``#`` åé¢å¯ä»¥æœ‰ä¸€ä¸ªå¯é€‰çš„é•¿åº¦ã€‚

å¦‚æœæŒ‡å®šäº†é•¿åº¦ï¼Œåˆ™ä¼šä½¿ç”¨æœ€åä¸€ä¸ªæˆå‘˜å¡«å……åˆ°æŒ‡å®šé•¿åº¦ã€‚


```racket
#(1 2 x3 display)
#8(1 2 x3 display)

(vector 1 2 3 'define)
(vector-ref #(1 2 3 define) 3)
```

## ä¸‰ç§ä¸åŒçš„â€œç­‰äºâ€ ##

ä¸‹é¢ä»‹ç»çš„â€œå“ˆå¸Œè¡¨â€ï¼Œæ¶‰åŠä¸‰ç§ä¸åŒçš„ *key* çš„åŒ¹é…æ–¹å¼ï¼Œåˆ†åˆ«å¯¹äºä¸‰ç§æ¯”è¾ƒå‡½æ•°ï¼š

- ``equal?``
- ``eqv?``
- ``eq?``


``eq?`` ç®—æ˜¯æœ€ä¸¥æ ¼çš„ï¼Œå®ƒéœ€è¦ä¸¤è€…æ˜¯ç›¸åŒçš„å¯¹è±¡ï¼š

```racket
(eq? 1 1)
(eq? 1.0 1.0)
(eq? 1.0 1) ;#f
(eq? (expt 2 10) (expt 2 10))
(eq? (expt 2 10) 1024)
(eq? (expt 2 100) (expt 2 100)) ;#f
(eq? (cons 1 2) (cons 1 2)) ;#f
(eq? 1/2 2/4)
(eq? "hello" "hello")
(eq? "hello" (bytes->string/utf-8 #"hello")) ;#f
```

è¿™é‡Œæ³¨æ„ï¼Œå¤§æ•´æ•° ``(expt 2 100)`` å¯èƒ½æ˜¯ä¸åŒå¯¹è±¡ã€‚

``eqv?`` ï¼Œæ˜¯åœ¨ ``eq?`` åŸºç¡€ä¸Šï¼Œæœ‰ä¸€äº›â€œæ”¾å®½â€ï¼Œåœ¨æ•°å­—ï¼š

```racket
(eq? (expt 2 100) (expt 2 100)) ;#f
(eqv? (expt 2 100) (expt 2 100)) ;#t
```

``equal?`` æ˜¯æœ€å¸¸ç”¨çš„åˆ¤æ–­ï¼Œå®ƒæ˜¯æ™®éæ„ä¹‰ä¸Šçš„â€œå€¼â€çš„æ¯”è¾ƒï¼ˆ ``eq?`` å’Œ ``eqv?`` çš„ ``true`` è‚¯å®šä¹Ÿæ˜¯ ``equal?`` çš„ ``true``ï¼‰ï¼š

```racket
(equal? 1.0 1) ;#f
(equal? (expt 2 100) (expt 2 100)) ;#t
(equal? (cons 1 2) (cons 1 2)) ;#t
(equal? "hello" (bytes->string/utf-8 #"hello")) ;#t
(equal? '(1 2 3) '(1 2 3)) ;#t
```


## å“ˆå¸Œè¡¨ ##

*Hash Table* ä¹Ÿæ˜¯ä¸€ç§ *racket* å†…ç½®çš„æ•°æ®ç»“æ„å®ç°ã€‚å®ƒå¯ä»¥åˆ†ä¸ºå¯å˜å’Œä¸å¯å˜çš„ä¸¤å¥—ï¼Œå¯¹äºä¸å¯å˜çš„ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥â€œæ‰©å±•å®ƒæ„å»ºæ–°çš„ç»“æ„â€ã€‚åŒæ—¶ï¼Œæ ¹æ® *key* çš„æ¯”è¾ƒè§„åˆ™ä¸åŒï¼Œåˆè¿›ä¸€æ­¥åˆ†æˆä¸‰ç§å­ç±»ï¼Œåˆ†åˆ«ä½¿ç”¨ ``equal?`` ``eqv?`` ``eq?`` ä½œä¸º *key* çš„æ¯”è¾ƒã€‚

æ„å»ºå¯å˜çš„ *Hash Table* ï¼Œå¯ä»¥ä½¿ç”¨ ``make-hash`` ``make-hasheqv`` ``make-hasheq`` å‡½æ•°ï¼Œæ„å»ºä¸å¯å˜çš„ç»“æ„ï¼Œå‡½æ•°å°±åˆ†åˆ«æ˜¯ ``hash`` ``hasheqv`` ``hasheq`` ã€‚

å¯å˜çš„ç»“æ„ï¼š

```racket
#lang racket  

(define ht (make-hash))
(hash-set! ht "first" 1)
(hash-set! ht 'second '(1 2 hello))
(hash-set! ht 3 'world)

(hash-ref ht 'second)
(hash-ref ht 3)
(hash-ref ht "first")
```

ä¸å¯å˜çš„ç»“æ„ï¼Œé™¤äº† ``hash`` å‡½æ•°ï¼Œè¿˜å¯ä»¥ä½¿ç”¨ ``#hash`` è¯­æ³•ï¼š

```racket
(define ht [hash "first" 1 'second "two" 3 'third])
(hash-ref ht 3)
; error
; (hash-set! ht "first" 2)

(define ht #hash(["first" . 1] [second . "two"] [3 . 'third]))
(hash-ref ht 'second)
```

``#hash`` æ„Ÿè§‰æ˜¯ä¸€ä¸ªå®ï¼Œé‡Œé¢ä¸èƒ½å†ä½¿ç”¨ *symbol* ï¼Œç›´æ¥å†™çš„æ ‡è¯†å°±æ˜¯ *symbol* ï¼Œå–å€¼æ—¶è¦æ³¨æ„ã€‚

å¯¹äº *Hash Table* ï¼Œéƒ½å¯ä»¥ä½¿ç”¨ ``hash-set`` æ–¹æ³•å¾—åˆ°ä¸€ä¸ªæ–°å¯¹è±¡ï¼š

```racket
(define ht [hash "first" 1 'second "two" 3 'third])
(hash-ref ht 3)

(define new_ht (hash-set ht "four" 444))
(hash-ref new_ht "four")
(hash-ref new_ht "first")
```



## å°ç®± ##

*å°ç®±* è¿™ä¸ªåå­—æ˜¯æˆ‘è‡ªå·±è¯‘çš„ï¼ŒæŒ‡çš„å°±æ˜¯ *Box* è¿™ç§æ•°æ®ç±»å‹ã€‚

å®ƒåˆçœ‹å¥½åƒæ²¡å•¥ç”¨ï¼Œæˆ‘ä¸ªäººç›®å‰çš„çœ‹æ³•ï¼Œæ˜¯å®ƒæä¾›äº†ä¸€ç§ç›´æ¥çš„â€œå¼•ç”¨â€çš„è¡¨è¾¾èƒ½åŠ›ï¼Œåƒâ€œæŒ‡é’ˆâ€ã€‚åŒæ—¶ï¼Œç½‘ä¸Šæœ‰äººæï¼Œ *Box* å¯èƒ½å¯¹äºåº”ç”¨å¼€å‘åœºæ™¯æ¥è¯´ä¸é‡è¦ï¼Œä½†æ˜¯å¯¹äºâ€œè¯­è¨€å¼€å‘â€åœºæ™¯ï¼Œå®ƒæ˜¯å¾ˆæœ‰å¿…è¦çš„ã€‚

*Box* çš„å€¼æ‰“å°å‡ºæ¥æ—¶ï¼Œä¼šæ˜¯åƒ ``'#&2`` è¿™ç§ï¼Œä»¥ ``#&`` å¼€å¤´ã€‚

```
#lang racket  


(define p (box 1))
(define (add1 p1) (set-box! p (+ (unbox p) 1)))
(add1 p)
p

(define r 1)
(define (add2 v) (set! v (+ v 2)))
(add2 r)
r
```

ä»å¦ä¸€ä¸ªæ–¹é¢æ¥è¯´ï¼Œå¦‚æœä¸€ä¸ªå‡½æ•°éœ€è¦ä½ ä¼ å…¥ *Box* ï¼Œé‚£ä¹ˆä¹Ÿå°±å¯ä»¥è¡¨ç¤ºï¼Œè¿™ä¸ªå‡½æ•°ä¼šç›´æ¥æ›´æ”¹å®ƒï¼Œè€Œä¸æ˜¯è¿”å›ä¸€ä¸ªæ–°å€¼ã€‚


## Void å’Œ Undefined ##

è¿™æ˜¯ä¸¤ä¸ªç‰¹æ®Šçš„å€¼ï¼Œ ``(void)`` æ–¹æ³•ï¼Œå¯ä»¥å¾—åˆ° ``#<void>`` ç±»å‹çš„è¿”å›ï¼Œå®ƒè¡¨ç¤ºâ€œæ— â€ï¼Œæ¯”å¦‚ ``display`` å‡½æ•°å°±æ˜¯æ²¡æœ‰è¿”å›çš„ã€‚

```racket
(void 1 2 3)
```

``#<undefined>`` ï¼Œå¯ä»¥åœ¨ä¸€äº›æœªåˆå§‹åŒ–å€¼çš„è®¿é—®æ—¶å‡ºç°ï¼ˆä¹Ÿå¯èƒ½æŠ¥é”™ï¼‰ã€‚


# è¡¨è¾¾å¼ #


# å® #
